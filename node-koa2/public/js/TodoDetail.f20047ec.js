(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["TodoDetail"],{4585:function(t,e,a){t.exports={todoDetail:"index-module_todoDetail_3Pv6Z",saveBtn:"index-module_saveBtn_3uifg",todoDetailContent:"index-module_todoDetailContent_19ElI",todoDetailHeader:"index-module_todoDetailHeader_3T4SK",todoDetailHeaderItem:"index-module_todoDetailHeaderItem_1A7qb",todoDetailTitle:"index-module_todoDetailTitle_3Dkca",finished:"index-module_finished_2LOol",todoDetailCheck:"index-module_todoDetailCheck_2_5WC",icon:"index-module_icon_1M2mh",todoDetailInput:"index-module_todoDetailInput_QFrdb",textarea:"index-module_textarea_3LyXP",todoDetailClaim:"index-module_todoDetailClaim_2X9ky"}},"59a9":function(t,e,a){"use strict";a.d(e,"k",(function(){return i})),a.d(e,"f",(function(){return o})),a.d(e,"h",(function(){return r})),a.d(e,"g",(function(){return d})),a.d(e,"i",(function(){return s})),a.d(e,"e",(function(){return u})),a.d(e,"c",(function(){return c})),a.d(e,"d",(function(){return l})),a.d(e,"a",(function(){return f})),a.d(e,"b",(function(){return p})),a.d(e,"j",(function(){return h})),a.d(e,"l",(function(){return D}));var n=a("65b5");function i(t){return n["a"].post("/api/todo/saveList",t)}function o(){return n["a"].get("/api/todo/getDateList")}function r(t){return n["a"].get("/api/todo/getList",t)}function d(t){return n["a"].get("/api/todo/getDetail/".concat(t))}function s(t){return n["a"].get("/api/todo/getListByDay",{day:t})}function u(){return n["a"].get("/api/todo/getReviewList")}function c(t){return n["a"].get("/api/todo/getFinishedList",t)}function l(t){return n["a"].get("/api/todo/getRecycleList",t)}function f(t){return n["a"].delete("/api/todo/deleteTodo/".concat(t))}function p(t){return n["a"].delete("/api/todo/deleteToRecycle/".concat(t))}function h(t){return n["a"].put("/api/todo/restoreToRecycle/".concat(t))}function D(t,e){return n["a"].put("/api/todo/finishTodo",{id:t,status:e})}},"7db0":function(t,e,a){"use strict";var n=a("23e7"),i=a("b727").find,o=a("44d2"),r=a("ae40"),d="find",s=!0,u=r(d);d in[]&&Array(1)[d]((function(){s=!1})),n({target:"Array",proto:!0,forced:s||!u},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o(d)},"7ffc":function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var n=[{name:"低优先级",key:1,color:"#1890ff"},{name:"中优先级",key:2,color:"#52c41a"},{name:"高优先级",key:3,color:"#faad14"},{name:"最高优先级",key:4,color:"#f5222d"}]},9937:function(t,e,a){"use strict";a.r(e);a("a4d3"),a("e01a"),a("7db0"),a("b0c0"),a("ac1f"),a("5319");var n=a("ade3"),i=(a("96cf"),a("1da1")),o=a("4585"),r=a.n(o),d=a("4d26"),s=a.n(d),u=a("59a9"),c=a("7ffc");e["default"]={name:"TodoDetail",data:function(){return{id:void 0,statusVisible:!1,statusData:{},currentDate:new Date,visibleDate:!1,todoData:{},title:"",description:"",date:+new Date,priority:void 0}},methods:{getTodoDetail:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t){a.next=2;break}return a.abrupt("return");case 2:return e.loading=!0,a.next=5,Object(u["g"])(t);case 5:n=a.sent,e.loading=!1,0===n.code&&(i=n.result,e.todoData=i,e.title=i.title,e.description=i.description,e.date=i.date,e.priority=i.priority,e.statusData=c["a"].find((function(t){return t.key===i.priority}))||{});case 8:case"end":return a.stop()}}),a)})))()},handleOpenDate:function(){this.visibleDate=!0},handleCloseDate:function(){this.visibleDate=!1},handleConfirmDate:function(t){this.date=this.$moment(t),this.handleCloseDate()},handleOpenStatus:function(){this.statusVisible=!0},handleCloseStatus:function(){this.statusVisible=!1},handleSelectStatus:function(t){this.statusData=t,this.priority=t.key,this.handleCloseStatus()},handleSave:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.title){e.next=3;break}return t.$toast("请填写标题~"),e.abrupt("return");case 3:return a={title:t.title,description:t.description,date:t.date,priority:t.priority},t.id&&(a["id"]=t.id),e.next=7,Object(u["k"])(a);case 7:n=e.sent,0===n.code&&(t.$toast.success("提交成功"),setTimeout((function(){t.$router.replace({name:"Todo"})}),1500));case 9:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this.$route.query.id;this.id=t,this.getTodoDetail(t)},render:function(){var t=this,e=arguments[0],a=this.$data,i=a.statusVisible,o=a.statusData,d=a.currentDate,u=a.visibleDate,l=a.todoData,f=a.id,p=a.title,h=a.description,D=a.date;return e("EContainer",{class:s()(r.a.todoDetail)},[e("EHeader",{attrs:{extra:e("van-button",{attrs:{plain:!0,type:"info"},class:r.a.saveBtn,on:{click:this.handleSave}},["保存"])}}),e("EContent",[e("div",{class:r.a.todoDetailContent},[e("div",{class:r.a.todoDetailHeader},[e("div",{class:r.a.todoDetailHeaderItem,on:{click:this.handleOpenStatus}},[e("span",{style:{color:o.color}},[o.name||"优先级"])]),e("div",{class:r.a.todoDetailHeaderItem},[e("div",{class:r.a.todoDetailClaim,on:{click:this.handleOpenDate}},[e("i",{class:s()("iconfont",r.a.icon)},[""]),e("span",[this.$moment(D).calendar(void 0,{sameDay:"[今天]",nextDay:"[明天]",nextWeek:"MM-DD HH:mm",lastDay:"[昨天]",lastWeek:"MM-DD HH:mm",sameElse:"MM-DD HH:mm"})])])])]),e("van-divider"),e("div",{class:s()(r.a.todoDetailTitle,Object(n["a"])({},r.a.finished,2===l.status))},[f&&e("span",{class:r.a.todoDetailCheck},[e("i",{class:s()("iconfont",r.a.icon),domProps:{innerHTML:2===l.status?"&#xe606;":"&#xe6ca;"}})]),e("van-field",{class:s()(r.a.todoDetailInput),attrs:{value:p,placeholder:"标题"},on:{input:function(e){return t.$data.title=e}},style:{paddingLeft:f?"":0}})]),e("van-field",{class:s()(r.a.todoDetailInput,r.a.textarea),attrs:{value:h,showWordLimit:!0,maxlength:"200",type:"textarea",rows:"10",autosize:!0,placeholder:"记录你的美好"},on:{input:function(e){return t.$data.description=e}}})])]),e("van-action-sheet",{attrs:{value:i,actions:c["a"],round:!1},on:{input:this.handleCloseStatus,select:this.handleSelectStatus}}),e("van-popup",{attrs:{value:u,position:"bottom"},on:{input:this.handleCloseDate}},[e("van-datetime-picker",{on:{cancel:this.handleCloseDate,confirm:this.handleConfirmDate},attrs:{value:d,type:"datetime",title:"选择完整时间"}})])])}}}}]);
//# sourceMappingURL=TodoDetail.f20047ec.js.map