(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Date"],{3282:function(e,t,n){e.exports={calender:"index-module_calender_1-ovm"}},"45fc":function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").some,o=n("a640"),i=n("ae40"),u=o("some"),s=i("some");r({target:"Array",proto:!0,forced:!u||!s},{some:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},"59a9":function(e,t,n){"use strict";n.d(t,"k",(function(){return a})),n.d(t,"f",(function(){return o})),n.d(t,"h",(function(){return i})),n.d(t,"g",(function(){return u})),n.d(t,"i",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return f})),n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return l})),n.d(t,"j",(function(){return m})),n.d(t,"l",(function(){return D}));var r=n("65b5");function a(e){return r["a"].post("/api/todo/saveList",e)}function o(){return r["a"].get("/api/todo/getDateList")}function i(e){return r["a"].get("/api/todo/getList",e)}function u(e){return r["a"].get("/api/todo/getDetail/".concat(e))}function s(e){return r["a"].get("/api/todo/getListByDay",{day:e})}function c(){return r["a"].get("/api/todo/getReviewList")}function d(e){return r["a"].get("/api/todo/getFinishedList",e)}function f(e){return r["a"].get("/api/todo/getRecycleList",e)}function h(e){return r["a"].delete("/api/todo/deleteTodo/".concat(e))}function l(e){return r["a"].delete("/api/todo/deleteToRecycle/".concat(e))}function m(e){return r["a"].put("/api/todo/restoreToRecycle/".concat(e))}function D(e,t){return r["a"].put("/api/todo/finishTodo",{id:e,status:t})}},"7db0":function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").find,o=n("44d2"),i=n("ae40"),u="find",s=!0,c=i(u);u in[]&&Array(1)[u]((function(){s=!1})),r({target:"Array",proto:!0,forced:s||!c},{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),o(u)},a198:function(e,t,n){"use strict";n.r(t);n("4de4"),n("7db0"),n("45fc"),n("96cf");var r=n("1da1"),a=n("3282"),o=n.n(a),i=n("59a9");t["default"]={name:"Date",data:function(){return{showCalender:!1,weekDate:[],currentDate:+new Date,todoList:[],dateList:[],loading:!1}},methods:{formatDate:function(e){var t=[],n=7,r=0,a=this.$moment(e).day(),o=e-864e5*a;while(n--){var i=864e5*r;t.push(o+i),r++}this.weekDate=t},formatterCalender:function(e){var t=this,n=this.dateList.some((function(n){return t.$moment(n).isSame(e.date,"day")}));return n&&(e.bottomInfo="待办"),e},getTodoListByDay:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,n=e.$moment(e.currentDate).format("YYYY-MM-DD"),t.next=4,Object(i["i"])(n);case 4:r=t.sent,e.loading=!1,0===r.code&&(e.todoList=r.result);case 7:case"end":return t.stop()}}),t)})))()},handleCheck:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.id,a=e.status,n.next=3,Object(i["l"])(r,a);case 3:o=n.sent,0===o.code&&t.$toast.success(o.message);case 5:case"end":return n.stop()}}),n)})))()},handleGoDetail:function(e){this.$router.push({name:"TodoDetail",query:{id:e.id}})},handleShowCalender:function(){this.showCalender=!0},handleCloseCalender:function(){this.showCalender=!1},handleConfirmCalender:function(e){var t=this,n=+new Date(e),r=this.weekDate.find((function(n){return t.$moment(n).isSame(e,"day")}));r?this.currentDate=r:(this.currentDate=n,this.formatDate(n)),this.handleCloseCalender(),this.getTodoListByDay()},handleUpdateValue:function(e){this.currentDate=e,this.getTodoListByDay()},handleDelete:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.id,n.next=3,Object(i["b"])(r);case 3:a=n.sent,0===a.code&&(t.$toast.success("删除成功"),t.todoList=t.todoList.filter((function(e){return e.id!==r})));case 5:case"end":return n.stop()}}),n)})))()},getTodoDate:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["f"])();case 2:n=t.sent,0===n.code&&(e.dateList=n.result);case 4:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,e.formatDate(e.currentDate),t.next=4,e.$store.dispatch("getTimes");case 4:n=t.sent,e.currentDate=n,e.formatDate(n),e.getTodoListByDay(),e.getTodoDate();case 9:case"end":return t.stop()}}),t)})))()},render:function(){var e=arguments[0],t=this.$data,n=t.showCalender,r=t.weekDate,a=t.currentDate,i=t.todoList,u=t.loading;return e("EContainer",[e("EHeader",{attrs:{title:this.$route.meta.title,type:"menu"}}),e("EAside"),e("EContent",[e("EWeekCard",{attrs:{weekDate:r,currentDate:a},on:{updateDate:this.handleUpdateValue,showMore:this.handleShowCalender}}),e("van-calendar",{class:o.a.calender,attrs:{value:n,defaultDate:new Date(a),round:!1,showTitle:!1,showConfirm:!1,minDate:new Date(2019,0,1),maxDate:new Date(2099,0,1),formatter:this.formatterCalender,color:"#f5222d"},on:{input:this.handleCloseCalender,select:this.handleConfirmCalender}}),e("van-divider",{class:"divider"},[this.$moment(a).isSame(new Date,"day")?"今日任务":this.$moment(a).format("YYYY-MM-DD")]),e("ETodoCard",{attrs:{loading:u,todoList:i},on:{check:this.handleCheck,goDetail:this.handleGoDetail,del:this.handleDelete}})]),e("EFooter")])}}}}]);
//# sourceMappingURL=Date.b77ab158.js.map