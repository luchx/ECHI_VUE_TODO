{"version":3,"sources":["webpack:///./src/api/todo.ts","webpack:///./src/views/Recycle/index.jsx"],"names":["ApiSaveTodoList","data","post","ApiGetTodoDate","get","ApiGetTodoList","ApiGetTodoDetail","id","ApiGetTodoListByDay","day","ApiGetReviewTodoList","ApiGetFinishedTodoList","ApiGetRecycleTodoList","ApiDeleteTodo","delete","ApiDeleteTodoToRecycle","ApiRestoreTodoFromRecycle","put","ApiToggleFinishTodo","status","name","currentPage","pageSize","total","todoList","loading","methods","getRecycleTodoList","page","resp","code","result","list","pagination","handleGoDetail","item","this","$router","push","params","handleDelete","$toast","success","filter","todo","handleRestore","mounted","render","$data","$route","meta","title"],"mappings":"2GAAA,waAmBM,SAAUA,EAAgBC,GAC9B,OAAO,OAAQC,KAAK,qBAAsBD,GAMtC,SAAUE,IACd,OAAO,OAAQC,IAAI,yBASf,SAAUC,EAAeJ,GAC7B,OAAO,OAAQG,IAAI,oBAAqBH,GAOpC,SAAUK,EAAiBC,GAC/B,OAAO,OAAQH,IAAR,8BAAmCG,IAOtC,SAAUC,EAAoBC,GAClC,OAAO,OAAQL,IAAI,yBAA0B,CAC3CK,QAOE,SAAUC,IACd,OAAO,OAAQN,IAAI,2BASf,SAAUO,EAAuBV,GACrC,OAAO,OAAQG,IAAI,4BAA6BH,GAS5C,SAAUW,EAAsBX,GACpC,OAAO,OAAQG,IAAI,2BAA4BH,GAO3C,SAAUY,EAAcN,GAC5B,OAAO,OAAQO,OAAR,+BAAuCP,IAO1C,SAAUQ,EAAuBR,GACrC,OAAO,OAAQO,OAAR,oCAA4CP,IAO/C,SAAUS,EAA0BT,GACxC,OAAO,OAAQU,IAAR,qCAA0CV,IAO7C,SAAUW,EAAoBX,EAAIY,GACtC,OAAO,OAAQF,IAAR,uBAAoC,CACzCV,KACAY,a,2FC9GW,cACbC,KAAM,UACNnB,KAFa,WAGX,MAAO,CACLoB,YAAa,EACbC,SAAU,GACVC,MAAO,EACPC,SAAU,GACVC,SAAS,IAGbC,QAAS,CACDC,mBADC,WAC2C,2LAAzBC,EAAyB,+BAAlB,EAAGN,EAAe,+BAAJ,IACxC,EAAKG,QADuC,wDAEhD,EAAKA,SAAU,EACf,EAAKJ,YAAcO,EACnB,EAAKN,SAAWA,EACVrB,EAAO,CACX2B,OACAN,YAP8C,UAS7BV,eAAsBX,GATO,QAS1C4B,EAT0C,OAUhD,EAAKJ,SAAU,EACG,IAAdI,EAAKC,OAAY,EACUD,EAAKE,OAA1BC,EADW,EACXA,KAAMC,EADK,EACLA,WACNV,EAAUU,EAAVV,MACR,EAAKC,SAAWQ,EAChB,EAAKT,MAAQA,GAfiC,+CAkBlDW,eAnBO,SAmBQC,GACbC,KAAKC,QAAQC,KAAK,CAChBlB,KAAM,iBACNmB,OAAQ,CACNhC,GAAI4B,EAAK5B,OAITiC,aA3BC,SA2BYL,GAAM,uKACf5B,EAAO4B,EAAP5B,GADe,SAEJM,eAAcN,GAFV,OAEjBsB,EAFiB,OAGL,IAAdA,EAAKC,OACP,EAAKW,OAAOC,QAAQ,QACpB,EAAKlB,SAAW,EAAKA,SAASmB,QAAO,SAAAC,GAAI,OAAIA,EAAKrC,KAAOA,MALpC,8CAQnBsC,cAnCC,SAmCaV,GAAM,uKAChB5B,EAAO4B,EAAP5B,GADgB,SAELS,eAA0BT,GAFrB,OAElBsB,EAFkB,OAGN,IAAdA,EAAKC,OACP,EAAKW,OAAOC,QAAQ,QACpB,EAAKlB,SAAW,EAAKA,SAASmB,QAAO,SAAAC,GAAI,OAAIA,EAAKrC,KAAOA,MALnC,+CAS5BuC,QAvDa,WAwDXV,KAAKT,sBAEPoB,OA1Da,WA0DJ,qBACuBX,KAAKY,MAA3BxB,EADD,EACCA,SAAUC,EADX,EACWA,QAElB,iDAEoBW,KAAKa,OAAOC,KAAKC,MAFrC,KAEiD,UAFjD,wDAMiB1B,EANjB,SAOkBD,EAPlB,SAWiB,GAXjB,aAQoBY,KAAKF,eARzB,IASeE,KAAKI,aATpB,QAUmBJ,KAAKS,mBAVxB","file":"js/Recycle.2366667d.js","sourcesContent":["import service from \"@/axios/service\";\r\n\r\ntype TodoData = {\r\n  id: number;\r\n  title: string;\r\n  description: string;\r\n  date: Date;\r\n  priority: number;\r\n};\r\n\r\n/**\r\n * 新增/编辑待办\r\n * @param {Object} data\r\n * @param {Number} data.id\r\n * @param {Number} data.title\r\n * @param {String} data.description\r\n * @param {timestamp} data.date\r\n * @param {Number} data.priority\r\n */\r\nexport function ApiSaveTodoList(data: TodoData) {\r\n  return service.post(\"/api/todo/saveList\", data);\r\n}\r\n\r\n/**\r\n * 获取日程\r\n */\r\nexport function ApiGetTodoDate() {\r\n  return service.get(\"/api/todo/getDateList\");\r\n}\r\n\r\n/**\r\n * 获取待办列表\r\n * @param {Object} data\r\n * @param {Number} data.page\r\n * @param {Number} data.pageSize\r\n */\r\nexport function ApiGetTodoList(data) {\r\n  return service.get(\"/api/todo/getList\", data);\r\n}\r\n\r\n/**\r\n * 获取待办详情\r\n * @param {String} id\r\n */\r\nexport function ApiGetTodoDetail(id) {\r\n  return service.get(`/api/todo/getDetail/${id}`);\r\n}\r\n\r\n/**\r\n * 根据日期获取待办数据\r\n * @param {timestamp} day\r\n */\r\nexport function ApiGetTodoListByDay(day) {\r\n  return service.get(\"/api/todo/getListByDay\", {\r\n    day\r\n  });\r\n}\r\n\r\n/**\r\n * 获取本周事件回顾\r\n */\r\nexport function ApiGetReviewTodoList() {\r\n  return service.get(\"/api/todo/getReviewList\");\r\n}\r\n\r\n/**\r\n * 获取已完成待办列表\r\n * @param {Object} data\r\n * @param {Number} data.page\r\n * @param {Number} data.pageSize\r\n */\r\nexport function ApiGetFinishedTodoList(data) {\r\n  return service.get(\"/api/todo/getFinishedList\", data);\r\n}\r\n\r\n/**\r\n * 获取回收站待办列表\r\n * @param {Object} data\r\n * @param {Number} data.page\r\n * @param {Number} data.pageSize\r\n */\r\nexport function ApiGetRecycleTodoList(data) {\r\n  return service.get(\"/api/todo/getRecycleList\", data);\r\n}\r\n\r\n/**\r\n * 删除待办\r\n * @param {String} id\r\n */\r\nexport function ApiDeleteTodo(id) {\r\n  return service.delete(`/api/todo/deleteTodo/${id}`);\r\n}\r\n\r\n/**\r\n * 删除待办-回收站\r\n * @param {String} id\r\n */\r\nexport function ApiDeleteTodoToRecycle(id) {\r\n  return service.delete(`/api/todo/deleteToRecycle/${id}`);\r\n}\r\n\r\n/**\r\n * 还原待办-回收站\r\n * @param {String} id\r\n */\r\nexport function ApiRestoreTodoFromRecycle(id) {\r\n  return service.put(`/api/todo/restoreToRecycle/${id}`);\r\n}\r\n\r\n/**\r\n * 切换完成状态\r\n * @param {String} id\r\n */\r\nexport function ApiToggleFinishTodo(id, status) {\r\n  return service.put(`/api/todo/finishTodo`, {\r\n    id,\r\n    status\r\n  });\r\n}\r\n","import {\r\n  ApiGetRecycleTodoList,\r\n  ApiDeleteTodo,\r\n  ApiRestoreTodoFromRecycle\r\n} from \"@/api/todo\";\r\n\r\nexport default {\r\n  name: \"Recycle\",\r\n  data() {\r\n    return {\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      total: 0,\r\n      todoList: [],\r\n      loading: false\r\n    };\r\n  },\r\n  methods: {\r\n    async getRecycleTodoList(page = 1, pageSize = 10) {\r\n      if (this.loading) return;\r\n      this.loading = true;\r\n      this.currentPage = page;\r\n      this.pageSize = pageSize;\r\n      const data = {\r\n        page,\r\n        pageSize\r\n      };\r\n      const resp = await ApiGetRecycleTodoList(data);\r\n      this.loading = false;\r\n      if (resp.code === 0) {\r\n        const { list, pagination } = resp.result;\r\n        const { total } = pagination;\r\n        this.todoList = list;\r\n        this.total = total;\r\n      }\r\n    },\r\n    handleGoDetail(item) {\r\n      this.$router.push({\r\n        name: \"TodoDetailView\",\r\n        params: {\r\n          id: item.id\r\n        }\r\n      });\r\n    },\r\n    async handleDelete(item) {\r\n      const { id } = item;\r\n      const resp = await ApiDeleteTodo(id);\r\n      if (resp.code === 0) {\r\n        this.$toast.success(\"删除成功\");\r\n        this.todoList = this.todoList.filter(todo => todo.id !== id);\r\n      }\r\n    },\r\n    async handleRestore(item) {\r\n      const { id } = item;\r\n      const resp = await ApiRestoreTodoFromRecycle(id);\r\n      if (resp.code === 0) {\r\n        this.$toast.success(\"还原成功\");\r\n        this.todoList = this.todoList.filter(todo => todo.id !== id);\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getRecycleTodoList();\r\n  },\r\n  render() {\r\n    const { todoList, loading } = this.$data;\r\n\r\n    return (\r\n      <EContainer>\r\n        <EHeader title={this.$route.meta.title} type=\"menu\" />\r\n        <EAside />\r\n        <EContent>\r\n          <ETodoCard\r\n            loading={loading}\r\n            todoList={todoList}\r\n            onGoDetail={this.handleGoDetail}\r\n            onDel={this.handleDelete}\r\n            onRestore={this.handleRestore}\r\n            recycle={true}\r\n          />\r\n        </EContent>\r\n        <EFooter />\r\n      </EContainer>\r\n    );\r\n  }\r\n};\r\n"],"sourceRoot":""}